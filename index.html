<!doctype html>
<html lang="en">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
        <meta
            name="viewport"
            content="width=320, initial-scale=1, maximum-scale=1, user-scalable=0, target-densitydpi=medium-dpi"
        />
        <title>Paperwhite Weather</title>
        <link rel="stylesheet" type="text/css" href="css/kindle.css" />
        <script type="text/javascript">
            (function () {
                "use strict";

                if (!window.console) {
                    window.console = {
                        log: function () {},
                        error: function () {},
                        warn: function () {}
                    };
                }

                var errorLog = [];

                function report(message) {
                    errorLog.push(message);
                    var statusEl = null;
                    if (elements && elements.status) {
                        statusEl = elements.status;
                    } else {
                        statusEl = document.getElementById("status");
                    }
                    if (statusEl) {
                        statusEl.textContent = "Error: " + message;
                    }
                    if (
                        window.console &&
                        typeof window.console.log === "function"
                    ) {
                        window.console.log("[error] " + message);
                    }
                }

                window.onerror = function (msg, src, line, col, err) {
                    var details = msg;
                    if (line) {
                        details += " (" + line + ":" + (col || 0) + ")";
                    }
                    if (err && err.stack) {
                        details += " " + err.stack;
                    }
                    report(details);
                    return false;
                };

                if (
                    window.console &&
                    typeof window.console.error === "function"
                ) {
                    var originalConsoleError = window.console.error;
                    window.console.error = function () {
                        var args = Array.prototype.slice.call(arguments);
                        report(args.join(" "));
                        originalConsoleError.apply(window.console, args);
                    };
                }

                var LATITUDE = 47.7258;
                var LONGITUDE = -122.1649;
                var APP_ID = "a4ca63cec93d4b0dcebe65db9a53931a";
                var UNITS = "metric";
                var UNIT_SYMBOL = UNITS === "imperial" ? "°F" : "°C";
                var WIND_UNIT = UNITS === "imperial" ? "mph" : "km/h";
                var LANGUAGE = "en";
                var FORECAST_ITEMS = 3;
                var REFRESH_INTERVAL = 30 * 60 * 1000;
                var REQUEST_TIMEOUT = 15000;

                var protocolCandidates = ["https:", "http:"];

                var elements = {};
                var forecastCells = [];
                var refreshTimer = null;
                var moonState = {
                    sunriseLocal: null,
                    sunsetLocal: null,
                    latitude: null,
                    lastTimestamp: null,
                    lastOffset: 0
                };

                function byId(id) {
                    return document.getElementById(id);
                }

                function pad(value) {
                    return value < 10 ? "0" + value : "" + value;
                }

                function capitalize(text) {
                    if (!text) {
                        return "";
                    }
                    return text.charAt(0).toUpperCase() + text.slice(1);
                }

                function asRounded(value) {
                    return typeof value === "number" && !isNaN(value)
                        ? Math.round(value)
                        : null;
                }

                function formatTime(timestampSeconds, offsetSeconds) {
                    var date = new Date(
                        (timestampSeconds + offsetSeconds) * 1000
                    );
                    var hours = date.getUTCHours();
                    var suffix = hours >= 12 ? "PM" : "AM";
                    hours = hours % 12;
                    if (hours === 0) {
                        hours = 12;
                    }
                    return (
                        hours + ":" + pad(date.getUTCMinutes()) + " " + suffix
                    );
                }

                var DAYS = ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"];
                var MONTHS = [
                    "Jan",
                    "Feb",
                    "Mar",
                    "Apr",
                    "May",
                    "Jun",
                    "Jul",
                    "Aug",
                    "Sep",
                    "Oct",
                    "Nov",
                    "Dec"
                ];

                function formatDateTime(timestampSeconds, offsetSeconds) {
                    var date = new Date(
                        (timestampSeconds + offsetSeconds) * 1000
                    );
                    var hours = date.getUTCHours();
                    var suffix = hours >= 12 ? "PM" : "AM";
                    hours = hours % 12;
                    if (hours === 0) {
                        hours = 12;
                    }
                    return (
                        DAYS[date.getUTCDay()] +
                        " " +
                        MONTHS[date.getUTCMonth()] +
                        " " +
                        pad(date.getUTCDate()) +
                        " " +
                        hours +
                        ":" +
                        pad(date.getUTCMinutes()) +
                        " " +
                        suffix
                    );
                }

                var MOON_ICON_CLASSES = [
                    ["wi-moon-alt-new", "wi-moon-alt-full"],
                    ["wi-moon-alt-waxing-crescent-1", "wi-moon-alt-waning-gibbous-1"],
                    ["wi-moon-alt-waxing-crescent-2", "wi-moon-alt-waning-gibbous-2"],
                    ["wi-moon-alt-waxing-crescent-3", "wi-moon-alt-waning-gibbous-3"],
                    ["wi-moon-alt-waxing-crescent-4", "wi-moon-alt-waning-gibbous-4"],
                    ["wi-moon-alt-waxing-crescent-5", "wi-moon-alt-waning-gibbous-5"],
                    ["wi-moon-alt-waxing-crescent-6", "wi-moon-alt-waning-gibbous-6"],
                    ["wi-moon-alt-first-quarter", "wi-moon-alt-third-quarter"],
                    ["wi-moon-alt-waxing-gibbous-1", "wi-moon-alt-waning-crescent-1"],
                    ["wi-moon-alt-waxing-gibbous-2", "wi-moon-alt-waning-crescent-2"],
                    ["wi-moon-alt-waxing-gibbous-3", "wi-moon-alt-waning-crescent-3"],
                    ["wi-moon-alt-waxing-gibbous-4", "wi-moon-alt-waning-crescent-4"],
                    ["wi-moon-alt-waxing-gibbous-5", "wi-moon-alt-waning-crescent-5"],
                    ["wi-moon-alt-waxing-gibbous-6", "wi-moon-alt-waning-crescent-6"],
                    ["wi-moon-alt-full", "wi-moon-alt-new"],
                    ["wi-moon-alt-waning-gibbous-1", "wi-moon-alt-waxing-crescent-1"],
                    ["wi-moon-alt-waning-gibbous-2", "wi-moon-alt-waxing-crescent-2"],
                    ["wi-moon-alt-waning-gibbous-3", "wi-moon-alt-waxing-crescent-3"],
                    ["wi-moon-alt-waning-gibbous-4", "wi-moon-alt-waxing-crescent-4"],
                    ["wi-moon-alt-waning-gibbous-5", "wi-moon-alt-waxing-crescent-5"],
                    ["wi-moon-alt-waning-gibbous-6", "wi-moon-alt-waxing-crescent-6"],
                    ["wi-moon-alt-third-quarter", "wi-moon-alt-first-quarter"],
                    ["wi-moon-alt-waning-crescent-1", "wi-moon-alt-waxing-gibbous-1"],
                    ["wi-moon-alt-waning-crescent-2", "wi-moon-alt-waxing-gibbous-2"],
                    ["wi-moon-alt-waning-crescent-3", "wi-moon-alt-waxing-gibbous-3"],
                    ["wi-moon-alt-waning-crescent-4", "wi-moon-alt-waxing-gibbous-4"],
                    ["wi-moon-alt-waning-crescent-5", "wi-moon-alt-waxing-gibbous-5"],
                    ["wi-moon-alt-waning-crescent-6", "wi-moon-alt-waxing-gibbous-6"]
                ];

                function normalizeDaySeconds(value) {
                    var mod = value % 86400;
                    if (mod < 0) {
                        mod += 86400;
                    }
                    return mod;
                }

                function calculateMoonPhase(date) {
                    var lp = 2551443; // length of lunar period in seconds
                    var newMoon = new Date(Date.UTC(1970, 0, 7, 20, 35, 0));
                    var phase =
                        ((date.getTime() - newMoon.getTime()) / 1000) % lp;
                    if (phase < 0) {
                        phase += lp;
                    }
                    return phase / lp;
                }

                function isNightAtLocalSeconds(localSeconds) {
                    if (
                        moonState.sunriseLocal === null ||
                        moonState.sunsetLocal === null
                    ) {
                        var hours = Math.floor(localSeconds / 3600);
                        return hours < 6 || hours >= 18;
                    }
                    var sunrise = moonState.sunriseLocal;
                    var sunset = moonState.sunsetLocal;
                    if (sunrise <= sunset) {
                        return localSeconds < sunrise || localSeconds >= sunset;
                    }
                    return !(localSeconds >= sunrise && localSeconds < sunset);
                }

                function applyMoonOrientation() {
                    if (!elements.moonPhase) {
                        return;
                    }
                    if (typeof moonState.latitude !== "number") {
                        elements.moonPhase.style.transform = "";
                        elements.moonPhase.style.webkitTransform = "";
                        return;
                    }
                    var className = elements.moonPhase.className || "";
                    var direction =
                        className.indexOf("moonFirstHalf") !== -1 ? -1 : 1;
                    var rotation = (moonState.latitude - 90) * direction;
                    var transform = "rotate(" + rotation + "deg)";
                    elements.moonPhase.style.transform = transform;
                    elements.moonPhase.style.webkitTransform = transform;
                }

                function moonPhaseIconClass(phase, isNight) {
                    if (!MOON_ICON_CLASSES.length) {
                        return {
                            className: "wi moonIcon",
                            firstHalf: phase < 0.5
                        };
                    }
                    var index = Math.floor(
                        phase * MOON_ICON_CLASSES.length
                    );
                    if (index >= MOON_ICON_CLASSES.length) {
                        index = MOON_ICON_CLASSES.length - 1;
                    }
                    var pair = MOON_ICON_CLASSES[index] || [];
                    var icon =
                        pair[isNight ? 1 : 0] !== undefined
                            ? pair[isNight ? 1 : 0]
                            : pair[0] || "";
                    var phaseClass = phase < 0.5 ? "moonFirstHalf" : "moonSecondHalf";
                    return {
                        className:
                            "wi " +
                            icon +
                            " moonIcon " +
                            phaseClass,
                        firstHalf: phase < 0.5
                    };
                }

                function updateMoonPhase(timestampSeconds, offsetSeconds) {
                    if (!elements.moonPhase) {
                        return;
                    }
                    if (typeof timestampSeconds !== "number") {
                        elements.moonPhase.textContent = "--";
                        elements.moonPhase.className = "wi moonIcon";
                        elements.moonPhase.style.transform = "";
                        elements.moonPhase.style.webkitTransform = "";
                        return;
                    }
                    var localDate = new Date(
                        (timestampSeconds + offsetSeconds) * 1000
                    );
                    var phase = calculateMoonPhase(localDate);
                    var localSeconds = normalizeDaySeconds(
                        timestampSeconds + offsetSeconds
                    );
                    var isNight = isNightAtLocalSeconds(localSeconds);
                    var iconData = moonPhaseIconClass(phase, isNight);
                    elements.moonPhase.textContent = "";
                    elements.moonPhase.className = iconData.className;
                    applyMoonOrientation();
                }

                function formatDateLabel(timestampSeconds, offsetSeconds) {
                    var date = new Date(
                        (timestampSeconds + offsetSeconds) * 1000
                    );
                    return (
                        DAYS[date.getUTCDay()] +
                        ", " +
                        date.getUTCDate() +
                        " " +
                        MONTHS[date.getUTCMonth()]
                    );
                }

                function kmhFromMs(speed) {
                    return Math.round(speed * 3.6);
                }

                function setStatus(message) {
                    if (elements.status) {
                        elements.status.textContent = message;
                    }
                }

                function resetForecastPanel() {
                    for (var i = 0; i < forecastCells.length; i++) {
                        forecastCells[i].time.textContent = "--";
                        forecastCells[i].temp.textContent = "--";
                        forecastCells[i].desc.textContent = "";
                    }
                }

                function initElements() {
                    elements.temperature = byId("temperature");
                    elements.unit = byId("unit");
                    elements.description = byId("description");
                    elements.feelsLike = byId("feelsLikeValue");
                    elements.wind = byId("windValue");
                    elements.humidity = byId("humidityValue");
                    elements.updated = byId("updatedValue");
                    elements.status = byId("status");

                    elements.date = byId("dateValue");
                    elements.time = byId("timeValue");
                    elements.moonPhase = byId("moonPhaseIcon");
                    elements.sunrise = byId("sunriseValue");
                    elements.sunset = byId("sunsetValue");

                    var i;
                    for (i = 0; i < FORECAST_ITEMS; i++) {
                        forecastCells.push({
                            time: byId("forecastTime" + i),
                            temp: byId("forecastTemp" + i),
                            desc: byId("forecastDesc" + i)
                        });
                    }

                    if (elements.date && !elements.date.textContent) {
                        elements.date.textContent = "--";
                    }
                    if (elements.time && !elements.time.textContent) {
                        elements.time.textContent = "--";
                    }
                    if (elements.moonPhase) {
                        elements.moonPhase.textContent = "--";
                        elements.moonPhase.className = "wi moonIcon";
                    }
                    if (elements.sunrise) {
                        elements.sunrise.textContent = "--";
                    }
                    if (elements.sunset) {
                        elements.sunset.textContent = "--";
                    }
                    if (elements.unit) {
                        elements.unit.textContent = UNIT_SYMBOL;
                    }
                    resetForecastPanel();
                }

                function buildUrl(protocol, endpoint) {
                    var url =
                        protocol +
                        "//api.openweathermap.org/data/2.5/" +
                        endpoint;
                    var params =
                        "lat=" +
                        LATITUDE +
                        "&lon=" +
                        LONGITUDE +
                        "&appid=" +
                        APP_ID +
                        "&units=" +
                        UNITS +
                        "&lang=" +
                        LANGUAGE;
                    if (endpoint === "forecast") {
                        params += "&cnt=" + FORECAST_ITEMS * 2;
                    }
                    return url + "?" + params;
                }

                function requestJsonp(url, onSuccess, onFailure) {
                    var callbackName =
                        "jsonp_cb_" +
                        new Date().getTime() +
                        "_" +
                        Math.floor(Math.random() * 1000);
                    var script = document.createElement("script");
                    var completed = false;
                    var timedOut = false;
                    var timeoutId = null;

                    function cleanup() {
                        if (timeoutId !== null) {
                            window.clearTimeout(timeoutId);
                            timeoutId = null;
                        }
                        if (script && script.parentNode) {
                            script.parentNode.removeChild(script);
                        }
                        try {
                            delete window[callbackName];
                        } catch (err) {
                            window[callbackName] = undefined;
                        }
                    }

                    window[callbackName] = function (data) {
                        if (timedOut) {
                            return;
                        }
                        completed = true;
                        cleanup();
                        onSuccess(data);
                    };

                    script.onerror = function () {
                        if (completed) {
                            return;
                        }
                        cleanup();
                        onFailure("network");
                    };

                    var separator = url.indexOf("?") >= 0 ? "&" : "?";
                    script.src =
                        url +
                        separator +
                        "callback=" +
                        callbackName +
                        "&ts=" +
                        new Date().getTime();
                    document.body.appendChild(script);

                    timeoutId = window.setTimeout(function () {
                        timedOut = true;
                        if (completed) {
                            return;
                        }
                        cleanup();
                        onFailure("timeout");
                    }, REQUEST_TIMEOUT);
                }

                function updateTimePanel(data, timezoneOffset) {
                    var hasDate = !!elements.date;
                    var hasTime = !!elements.time;
                    var hasMoon = !!elements.moonPhase;
                    if (!hasDate && !hasTime && !hasMoon) {
                        return;
                    }

                    if (data && typeof data.dt === "number") {
                        moonState.lastTimestamp = data.dt;
                        moonState.lastOffset = timezoneOffset;
                        if (hasDate) {
                            elements.date.textContent = formatDateLabel(
                                data.dt,
                                timezoneOffset
                            );
                        }
                        if (hasTime) {
                            elements.time.textContent = formatTime(
                                data.dt,
                                timezoneOffset
                            );
                        }
                        if (hasMoon) {
                            updateMoonPhase(data.dt, timezoneOffset);
                        }
                    } else {
                        moonState.lastTimestamp = null;
                        moonState.lastOffset = 0;
                        if (hasDate) {
                            elements.date.textContent = "--";
                        }
                        if (hasTime) {
                            elements.time.textContent = "--";
                        }
                        if (hasMoon) {
                            updateMoonPhase(null, 0);
                        }
                    }
                }

                function updateSunTimesPanel(sys, timezoneOffset) {
                    var sunriseText = "--";
                    var sunsetText = "--";
                    var sunriseLocal = null;
                    var sunsetLocal = null;

                    if (sys) {
                        if (typeof sys.sunrise === "number") {
                            sunriseText = formatTime(
                                sys.sunrise,
                                timezoneOffset
                            );
                            sunriseLocal = normalizeDaySeconds(
                                sys.sunrise + timezoneOffset
                            );
                        }
                        if (typeof sys.sunset === "number") {
                            sunsetText = formatTime(sys.sunset, timezoneOffset);
                            sunsetLocal = normalizeDaySeconds(
                                sys.sunset + timezoneOffset
                            );
                        }
                    }

                    moonState.sunriseLocal = sunriseLocal;
                    moonState.sunsetLocal = sunsetLocal;

                    if (elements.sunrise) {
                        elements.sunrise.textContent = sunriseText;
                    }
                    if (elements.sunset) {
                        elements.sunset.textContent = sunsetText;
                    }

                    if (moonState.lastTimestamp !== null) {
                        updateMoonPhase(
                            moonState.lastTimestamp,
                            moonState.lastOffset
                        );
                    }
                }

                function updateWeatherPanel(data) {
                    if (!data || !data.main || !elements.temperature) {
                        return;
                    }

                    var tempValue = asRounded(data.main.temp);
                    elements.temperature.textContent =
                        tempValue !== null ? tempValue : "--";
                    if (elements.unit) {
                        elements.unit.textContent = UNIT_SYMBOL;
                    }

                    var descriptionText = "";
                    if (
                        data.weather &&
                        data.weather.length > 0 &&
                        data.weather[0].description
                    ) {
                        descriptionText = capitalize(
                            data.weather[0].description
                        );
                    }
                    if (elements.description) {
                        elements.description.textContent = descriptionText;
                    }

                    var feelsValue = asRounded(data.main.feels_like);
                    if (elements.feelsLike) {
                        elements.feelsLike.textContent =
                            feelsValue !== null
                                ? feelsValue + UNIT_SYMBOL
                                : "--";
                    }

                    var windDisplay = "--";
                    if (data.wind && typeof data.wind.speed === "number") {
                        if (UNITS === "imperial") {
                            windDisplay =
                                Math.round(data.wind.speed) + " " + WIND_UNIT;
                        } else {
                            windDisplay =
                                kmhFromMs(data.wind.speed) + " " + WIND_UNIT;
                        }
                    }
                    if (elements.wind) {
                        elements.wind.textContent = windDisplay;
                    }

                    var humidityValue = asRounded(data.main.humidity);
                    if (elements.humidity) {
                        elements.humidity.textContent =
                            humidityValue !== null ? humidityValue + "%" : "--";
                    }

                    if (
                        data.coord &&
                        data.coord.lat !== undefined &&
                        data.coord.lat !== null
                    ) {
                        var parsedLat = parseFloat(data.coord.lat);
                        if (!isNaN(parsedLat)) {
                            moonState.latitude = parsedLat;
                            applyMoonOrientation();
                        }
                    }
                }

                function updateForecastPanel(data) {
                    if (!data || !data.list || !data.city) {
                        resetForecastPanel();
                        return;
                    }
                    var timezoneOffset = data.city.timezone || 0;
                    var i;
                    for (i = 0; i < forecastCells.length; i++) {
                        if (i < data.list.length) {
                            var entry = data.list[i];
                            forecastCells[i].time.textContent = formatTime(
                                entry.dt,
                                timezoneOffset
                            );
                            var forecastTemp = asRounded(
                                entry.main && entry.main.temp
                            );
                            forecastCells[i].temp.textContent =
                                forecastTemp !== null
                                    ? forecastTemp + UNIT_SYMBOL
                                    : "--";
                            var forecastDesc = "";
                            if (
                                entry.weather &&
                                entry.weather.length > 0 &&
                                entry.weather[0].main
                            ) {
                                forecastDesc = capitalize(
                                    entry.weather[0].main
                                );
                            }
                            forecastCells[i].desc.textContent = forecastDesc;
                        } else {
                            forecastCells[i].time.textContent = "--";
                            forecastCells[i].temp.textContent = "--";
                            forecastCells[i].desc.textContent = "";
                        }
                    }
                }

                function scheduleNext() {
                    if (refreshTimer !== null) {
                        window.clearTimeout(refreshTimer);
                    }
                    refreshTimer = window.setTimeout(
                        refreshAll,
                        REFRESH_INTERVAL
                    );
                }

                function loadCurrent(protocolIndex, onSuccess, onFailure) {
                    if (protocolIndex >= protocolCandidates.length) {
                        onFailure(
                            "Weather update failed (all protocols exhausted)"
                        );
                        return;
                    }
                    var protocol = protocolCandidates[protocolIndex];
                    var url = buildUrl(protocol, "weather");
                    requestJsonp(
                        url,
                        function (data) {
                            var code =
                                data && data.cod ? parseInt(data.cod, 10) : 0;
                            if (!data || (code !== 200 && code !== 0)) {
                                onFailure("Weather data unavailable");
                                return;
                            }
                            var timezoneOffset =
                                (data && data.timezone) || 0;
                            updateTimePanel(data, timezoneOffset);
                            updateSunTimesPanel(
                                data ? data.sys : null,
                                timezoneOffset
                            );
                            updateWeatherPanel(data);
                            onSuccess(data);
                        },
                        function (reason) {
                            if (protocolIndex + 1 < protocolCandidates.length) {
                                setStatus("Retrying weather via HTTP...");
                                loadCurrent(
                                    protocolIndex + 1,
                                    onSuccess,
                                    onFailure
                                );
                            } else {
                                onFailure(
                                    "Weather update failed (" + reason + ")"
                                );
                            }
                        }
                    );
                }

                function loadForecast(protocolIndex, onSuccess, onFailure) {
                    if (protocolIndex >= protocolCandidates.length) {
                        onFailure(
                            "Forecast update failed (all protocols exhausted)"
                        );
                        return;
                    }
                    var protocol = protocolCandidates[protocolIndex];
                    var url = buildUrl(protocol, "forecast");
                    requestJsonp(
                        url,
                        function (data) {
                            var code =
                                data && data.cod ? parseInt(data.cod, 10) : 0;
                            if (!data || (code !== 200 && code !== 0)) {
                                onFailure("Forecast data unavailable");
                                return;
                            }
                            updateForecastPanel(data);
                            onSuccess();
                        },
                        function (reason) {
                            if (protocolIndex + 1 < protocolCandidates.length) {
                                setStatus("Retrying forecast via HTTP...");
                                loadForecast(
                                    protocolIndex + 1,
                                    onSuccess,
                                    onFailure
                                );
                            } else {
                                onFailure(
                                    "Forecast update failed (" + reason + ")"
                                );
                            }
                        }
                    );
                }

                function refreshAll() {
                    if (refreshTimer !== null) {
                        window.clearTimeout(refreshTimer);
                        refreshTimer = null;
                    }
                    setStatus("Updating weather...");
                    var outstanding = 2;
                    var successCount = 0;
                    var latestWeatherData = null;
                    var messageLocked = false;

                    function markDone(success) {
                        outstanding -= 1;
                        if (success) {
                            successCount += 1;
                        }
                        if (outstanding <= 0) {
                            if (successCount === 2 && latestWeatherData) {
                                var stamp = formatDateTime(
                                    latestWeatherData.dt,
                                    latestWeatherData.timezone || 0
                                );
                                elements.updated.textContent = stamp;
                                setStatus("Updated " + stamp);
                            }
                            scheduleNext();
                        }
                    }

                    loadCurrent(
                        0,
                        function (data) {
                            latestWeatherData = data;
                            markDone(true);
                        },
                        function (message) {
                            if (!messageLocked) {
                                setStatus(message);
                                messageLocked = true;
                            }
                            markDone(false);
                        }
                    );

                    loadForecast(
                        0,
                        function () {
                            markDone(true);
                        },
                        function (message) {
                            if (!messageLocked) {
                                setStatus(message);
                                messageLocked = true;
                            }
                            resetForecastPanel();
                            markDone(false);
                        }
                    );
                }

                window.addEventListener("load", function () {
                    initElements();
                    setStatus("Updating weather...");
                    refreshAll();
                });
            })();
        </script>
    </head>
    <body>
        <div id="app">
            <div id="mainPanel">
                <div id="topRow">
                    <i id="moonPhaseIcon" class="moonIcon wi">--</i>
                    <div id="temperatureWrapper">
                        <span id="temperature">--</span>
                        <span id="unit">°C</span>
                    </div>
                </div>
                <div id="dateValue" class="date-display">--</div>
                <div id="timeValue" class="time-display">--</div>
            </div>
            <div id="bottomPanel">
                <div id="forecast">
                    <div class="forecast-item">
                        <div id="forecastTime0" class="forecast-time">--</div>
                        <div id="forecastTemp0" class="forecast-temp">--</div>
                        <div id="forecastDesc0" class="forecast-desc"></div>
                    </div>
                    <div class="forecast-item">
                        <div id="forecastTime1" class="forecast-time">--</div>
                        <div id="forecastTemp1" class="forecast-temp">--</div>
                        <div id="forecastDesc1" class="forecast-desc"></div>
                    </div>
                    <div class="forecast-item">
                        <div id="forecastTime2" class="forecast-time">--</div>
                        <div id="forecastTemp2" class="forecast-temp">--</div>
                        <div id="forecastDesc2" class="forecast-desc"></div>
                    </div>
                </div>
            </div>
            <div id="footer">
                <div id="updatedInfo">
                    Updated <span id="updatedValue">--</span>
                </div>
                <div id="status">Loading...</div>
            </div>
        </div>
    </body>
</html>
